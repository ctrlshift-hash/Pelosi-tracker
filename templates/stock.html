<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">{{ ticker }} - Stock Details | Pelosi Tracker</title>
    <link rel="icon" type="image/png" href="https://static.wixstatic.com/media/e2da02_a39dfd0e6b8a430f81cac5ad40597208~mv2.png">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Background Video -->
    <video id="background-video" autoplay muted loop playsinline preload="auto">
        <source src="https://pub-de5cfab5b69047b7ba92c036589e9045.r2.dev/Galaxy%20Free%20Background%20Video%2C%20Motion%20Graphics%2C%20No%20Copyright%20Background%20%20All%20Background%20Video%20-%20All%20Background%20Videos%20(1080p%2C%20h264%2C%20youtube).mp4" type="video/mp4">
    </video>
    
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <img src="https://static.wixstatic.com/media/e2da02_fa14682774564a55a4ce110e426df23e~mv2.png" alt="Nancy Pelosi" class="nav-logo">
                <a href="/" style="color: inherit; text-decoration: none;"><span>Pelosi Tracker</span></a>
            </div>
            <div class="nav-links">
                <a href="/">Home</a>
                <a href="/#holdings">Holdings</a>
                <a href="/#trades">Trades</a>
                <a href="/profiles">Profiles</a>
            </div>
        </div>
    </nav>

    <!-- Stock Header -->
    <section class="stock-header-section">
        <div class="container">
            <div class="stock-header">
                <div class="stock-title">
                    <h1 id="stock-name">Loading...</h1>
                    <p id="stock-exchange" class="stock-meta">Loading...</p>
                    <p id="stock-status" class="stock-status"></p>
                </div>
                <div class="stock-price-info">
                    <div class="price-metric">
                        <div class="metric-label">Current Price</div>
                        <div class="metric-value" id="current-price">$0.00</div>
                    </div>
                    <div class="price-metric">
                        <div class="metric-label">24h Change</div>
                        <div class="metric-value" id="price-change">+0.00 (+0.00%)</div>
                    </div>
                    <div class="price-metric">
                        <div class="metric-label">52 Week Range</div>
                        <div class="metric-value" id="week-range">$0.00 - $0.00</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stock Content -->
    <section class="stock-content-section">
        <div class="container">
            <div class="stock-grid">
                <!-- Left Column -->
                <div class="stock-left-column">
                    <!-- Price Chart -->
                    <div class="chart-card">
                        <div class="card-header">
                            <h2>{{ ticker }} Price History and Technical Analysis</h2>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-type="price">Price</button>
                                <button class="chart-btn" data-type="volume">Volume</button>
                            </div>
                        </div>
                        <div class="chart-container-large">
                            <canvas id="priceChart"></canvas>
                        </div>
                        <div class="chart-zoom">
                            <button class="zoom-btn" data-range="1m">1M</button>
                            <button class="zoom-btn" data-range="3m">3M</button>
                            <button class="zoom-btn" data-range="6m">6M</button>
                            <button class="zoom-btn active" data-range="1y">1Y</button>
                            <button class="zoom-btn" data-range="all">All</button>
                        </div>
                    </div>

                    <!-- About Section -->
                    <div class="info-card">
                        <h3>About <span id="company-name">{{ ticker }}</span></h3>
                        <p id="company-description">Loading company information...</p>
                    </div>
                </div>

                <!-- Right Column -->
                <div class="stock-right-column">
                    <!-- Congressional Trading Activity -->
                    <div class="trades-card">
                        <div class="card-header">
                            <h2>Nancy Pelosi Trading Activity for {{ ticker }}</h2>
                        </div>
                        <div class="compliance-info">
                            <span id="transaction-count">0 transactions</span>
                            <span class="compliance-rate" id="compliance-rate">Compliance: 100%</span>
                        </div>
                        <div class="trades-table-wrapper">
                            <table class="trades-table">
                                <thead>
                                    <tr>
                                        <th>Politician</th>
                                        <th>Traded Date</th>
                                        <th>Filed Date</th>
                                        <th>Action</th>
                                        <th>Type</th>
                                        <th>Amount Range</th>
                                        <th>Excess Return</th>
                                    </tr>
                                </thead>
                                <tbody id="trades-table-body">
                                    <tr>
                                        <td colspan="7" class="loading">Loading trading activity...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Similar Stocks -->
                    <div class="similar-stocks-card">
                        <h2>Similar Stocks</h2>
                        <p class="section-subtitle">Based on congressional trading patterns</p>
                        <div id="similar-stocks-list" class="similar-stocks-list">
                            <div class="loading">Loading similar stocks...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="{{ url_for('static', filename='js/stock.js') }}"></script>
</body>
</html>

